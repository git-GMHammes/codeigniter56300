# ğŸ“ Arquitetura do Sistema - DocumentaÃ§Ã£o TÃ©cnica

> **Projeto**: API REST Multi-tenant com Frontend Multi-plataforma  
> **Backend**: CodeIgniter 4  
> **Frontend**: Flutter Web/Mobile + React Web  
> **PadrÃ£o**: MVC + Service Layer + Repository Pattern  
> **Data**: Dezembro 2025

---

## ğŸ“‹ Ãndice

1. [VisÃ£o Geral da Arquitetura](#visÃ£o-geral-da-arquitetura)
2. [Backend - API CodeIgniter 4](#backend---api-codeigniter-4)
3. [Frontend Flutter](#frontend-flutter)
4. [Frontend React](#frontend-react)
5. [Fluxos de Dados](#fluxos-de-dados)
6. [Code Review e Boas PrÃ¡ticas](#code-review-e-boas-prÃ¡ticas)
7. [SeguranÃ§a e AutenticaÃ§Ã£o](#seguranÃ§a-e-autenticaÃ§Ã£o)
8. [ConclusÃ£o](#conclusÃ£o)

---

## ğŸ—ï¸ VisÃ£o Geral da Arquitetura

### Arquitetura Geral do Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CAMADA DE CLIENTES                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Flutter Web/Mobile â”‚         â”‚     React Web        â”‚     â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚         â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚     â”‚
â”‚  â”‚   â”‚ Presentation â”‚   â”‚         â”‚   â”‚  Components  â”‚   â”‚     â”‚
â”‚  â”‚   â”‚ Application  â”‚   â”‚         â”‚   â”‚    Hooks     â”‚   â”‚     â”‚
â”‚  â”‚   â”‚    Domain    â”‚   â”‚         â”‚   â”‚   Contexts   â”‚   â”‚     â”‚
â”‚  â”‚   â”‚     Data     â”‚   â”‚         â”‚   â”‚   Services   â”‚   â”‚     â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚         â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚           â”‚                                   â”‚                â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                           â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   CORS/HTTPS   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CAMADA DE API REST                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              CodeIgniter 4 Framework (v4.x)                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   AuthFilter    â”‚â”€â”€â”€â–¶ â”‚ LogRequestFilter â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    CONTROLLERS (v1)                        â”‚  â”‚
â”‚  â”‚  â€¢ UserManagement/AuthController                           â”‚  â”‚
â”‚  â”‚  â€¢ UserManagement/ManagerController                        â”‚  â”‚
â”‚  â”‚  â€¢ UserCustomer/ManagerController                          â”‚  â”‚
â”‚  â”‚  â€¢ UserCustomerFile/ManagerController                      â”‚  â”‚
â”‚  â”‚  â€¢ UserCustomerManagement/ManagerController                â”‚  â”‚
â”‚  â”‚  â€¢ Log/ManagerController                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    REQUESTS (v1)                           â”‚  â”‚
â”‚  â”‚  â€¢ LoginRequest, StoreRequest, ModifyRequest               â”‚  â”‚
â”‚  â”‚  â€¢ SearchRequest (ValidaÃ§Ã£o + Regras de NegÃ³cio)           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    SERVICES (v1)                           â”‚  â”‚
â”‚  â”‚  â€¢ AuthenticationService (JWT + Password)                  â”‚  â”‚
â”‚  â”‚  â€¢ TokenService (GeraÃ§Ã£o/ValidaÃ§Ã£o JWT)                    â”‚  â”‚
â”‚  â”‚  â€¢ ManagerService (CRUD + LÃ³gica de NegÃ³cio)               â”‚  â”‚
â”‚  â”‚  â€¢ UploadService (Gerenciamento de Arquivos)               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     MODELS (v1)                            â”‚  â”‚
â”‚  â”‚  â€¢ BaseResourceModel (CRUD Base + Soft Delete)             â”‚  â”‚
â”‚  â”‚  â€¢ UserManagement/ResourceModel                            â”‚  â”‚
â”‚  â”‚  â€¢ UserCustomer/ResourceModel + FileModel                  â”‚  â”‚
â”‚  â”‚  â€¢ Log/ResourceModel                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚   Database   â”‚ â”‚  Database  â”‚ â”‚  Database  â”‚
â”‚   Primary    â”‚ â”‚  Secondary â”‚ â”‚   Logs     â”‚
â”‚   (Users)    â”‚ â”‚ (Customers)â”‚ â”‚  (Audit)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Backend - API CodeIgniter 4

### 1. Estrutura de Camadas MVC Estendida

O projeto implementa uma arquitetura em **6 camadas** que estende o padrÃ£o MVC tradicional:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    1. ROUTES LAYER                           â”‚
â”‚  Define endpoints versionados da API                         â”‚
â”‚  LocalizaÃ§Ã£o: app/Routes/API/v1/**/api_routes.php            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    2. FILTERS LAYER                          â”‚
â”‚  â€¢ AuthFilter: ValidaÃ§Ã£o JWT                                 â”‚
â”‚  â€¢ LogRequestFilter: Auditoria de requisiÃ§Ãµes                â”‚
â”‚  LocalizaÃ§Ã£o: app/Filters/v1/                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    3. CONTROLLERS LAYER                      â”‚
â”‚  â€¢ Recebe requisiÃ§Ãµes HTTP                                   â”‚
â”‚  â€¢ Orquestra chamadas aos Services                           â”‚
â”‚  â€¢ Retorna ApiResponse padronizada                           â”‚
â”‚  Base: BaseManagerController                                 â”‚
â”‚  LocalizaÃ§Ã£o: app/Controllers/API/v1/                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    4. REQUESTS LAYER                         â”‚
â”‚  â€¢ ValidaÃ§Ã£o de entrada (Input Validation)                   â”‚
â”‚  â€¢ Regras customizadas (Rules)                               â”‚
â”‚  â€¢ SanitizaÃ§Ã£o de dados                                      â”‚
â”‚  LocalizaÃ§Ã£o: app/Requests/v1/ + app/Rules/v1/               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    5. SERVICES LAYER                         â”‚
â”‚  â€¢ LÃ³gica de negÃ³cio complexa                                â”‚
â”‚  â€¢ TransaÃ§Ãµes multi-tabela                                   â”‚
â”‚  â€¢ IntegraÃ§Ã£o com APIs externas                              â”‚
â”‚  Base: BaseManagerService                                    â”‚
â”‚  LocalizaÃ§Ã£o: app/Services/v1/                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    6. MODELS LAYER                           â”‚
â”‚  â€¢ Acesso direto ao banco de dados                           â”‚
â”‚  â€¢ CRUD bÃ¡sico + Soft Delete                                 â”‚
â”‚  â€¢ Relacionamentos entre entidades                           â”‚
â”‚  Base: BaseResourceModel                                     â”‚
â”‚  LocalizaÃ§Ã£o: app/Models/v1/                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    Database     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Fluxo de RequisiÃ§Ã£o Completo

#### 2.1. Fluxo de AutenticaÃ§Ã£o (Login)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Cliente   â”‚
â”‚ (Flutter/   â”‚
â”‚  React)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ POST /api/v1/user-management/login
       â”‚ { "email": "user@gov.br", "password": "***" }
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ROUTES: app/Routes/API/v1/UserManagement/api_routes.php â”‚
â”‚  $routes->post('login', 'AuthController::login');        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CONTROLLER: AuthController::login()                     â”‚
â”‚  1. Valida dados com LoginRequest                        â”‚
â”‚  2. Chama AuthenticationService::login()                 â”‚
â”‚  3. Retorna JWT + dados do usuÃ¡rio                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  REQUEST: LoginRequest                                   â”‚
â”‚  â€¢ Valida email (formato + obrigatÃ³rio)                  â”‚
â”‚  â€¢ Valida senha (min 6 chars + obrigatÃ³rio)              â”‚
â”‚  â€¢ Sanitiza inputs                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SERVICE: AuthenticationService::login()                 â”‚
â”‚  1. Busca usuÃ¡rio por email (UserModel)                  â”‚
â”‚  2. Verifica senha (PasswordService::verify)             â”‚
â”‚  3. Gera JWT (TokenService::generate)                    â”‚
â”‚  4. Atualiza last_login                                  â”‚
â”‚  5. Registra log de acesso                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MODEL: UserManagement/ResourceModel                     â”‚
â”‚  â€¢ findByEmail($email)                                   â”‚
â”‚  â€¢ update(['last_login' => now()])                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RESPONSE: ApiResponse                                   â”‚
â”‚  {                                                       â”‚
â”‚    "success": true,                                      â”‚
â”‚    "data": {                                             â”‚
â”‚      "token": "eyJ0eXAiOiJKV1QiLCJh...",                 â”‚
â”‚      "user": { "id": 1, "name": "..." }                  â”‚
â”‚    },                                                    â”‚
â”‚    "message": "Login realizado com sucesso"              â”‚
â”‚  }                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.2. Fluxo de RequisiÃ§Ã£o Autenticada (CRUD)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Cliente   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ GET /api/v1/user-customer?page=1&limit=10
       â”‚ Headers: { Authorization: "Bearer eyJ0eXAi..." }
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FILTER: AuthFilter::before()                            â”‚
â”‚  1. Extrai token do header Authorization                 â”‚
â”‚  2. Valida JWT (TokenService::validate)                  â”‚
â”‚  3. Injeta dados do usuÃ¡rio em CurrentUser               â”‚
â”‚  4. Verifica permissÃµes                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ âœ“ Token vÃ¡lido
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FILTER: LogRequestFilter::before()                      â”‚
â”‚  â€¢ Registra timestamp de entrada                         â”‚
â”‚  â€¢ Captura IP, User-Agent, Endpoint                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CONTROLLER: UserCustomer/ManagerController::index()     â”‚
â”‚  1. Valida query params com SearchRequest                â”‚
â”‚  2. Chama ManagerService::search()                       â”‚
â”‚  3. Formata response com ApiResponse                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  REQUEST: SearchRequest                                  â”‚
â”‚  â€¢ Valida page (inteiro positivo)                        â”‚
â”‚  â€¢ Valida limit (max 100)                                â”‚
â”‚  â€¢ Valida order_by (campos permitidos)                   â”‚
â”‚  â€¢ Sanitiza filtros                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SERVICE: UserCustomer/ManagerService::search()          â”‚
â”‚  1. Monta query com filtros                              â”‚
â”‚  2. Aplica paginaÃ§Ã£o                                     â”‚
â”‚  3. Busca dados (ResourceModel)                          â”‚
â”‚  4. Enriquece dados (joins, related)                     â”‚
â”‚  5. Aplica formataÃ§Ã£o de resposta                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MODEL: UserCustomer/ResourceModel                       â”‚
â”‚  â€¢ MÃ©todo search() com QueryBuilder                      â”‚
â”‚  â€¢ Aplica soft_delete filter (deleted_at IS NULL)        â”‚
â”‚  â€¢ Retorna Collection paginada                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FILTER: LogRequestFilter::after()                       â”‚
â”‚  â€¢ Calcula tempo de execuÃ§Ã£o                             â”‚
â”‚  â€¢ Registra status code da resposta                      â”‚
â”‚  â€¢ Salva log completo (LogModel)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RESPONSE: ApiResponse (Paginada)                        â”‚
â”‚  {                                                       â”‚
â”‚    "success": true,                                      â”‚
â”‚    "data": [{ ... }, { ... }],                           â”‚
â”‚    "pagination": {                                       â”‚
â”‚      "page": 1,                                          â”‚
â”‚      "limit": 10,                                        â”‚
â”‚      "total": 156,                                       â”‚
â”‚      "pages": 16                                         â”‚
â”‚    }                                                     â”‚
â”‚  }                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. PadrÃµes de CÃ³digo Aplicados

#### 3.1. BaseResourceModel (HeranÃ§a)

```php
/**
 * Model base com funcionalidades comuns
 * Todos os models herdam desta classe
 */
abstract class BaseResourceModel extends Model
{
    // Soft Delete automÃ¡tico
    protected $useSoftDeletes = true;
    protected $deletedField = 'deleted_at';
    
    // Timestamps automÃ¡ticos
    protected $useTimestamps = true;
    protected $createdField = 'created_at';
    protected $updatedField = 'updated_at';
    
    // MÃ©todos comuns herdados por todos
    public function search(array $filters, int $page, int $limit)
    {
        // ImplementaÃ§Ã£o de busca avanÃ§ada
        // Aplicada automaticamente em todos os models
    }
    
    public function softDelete(int $id): bool
    {
        // Soft delete padronizado
        return $this->update($id, ['deleted_at' => date('Y-m-d H:i:s')]);
    }
}
```

#### 3.2. ApiResponse (PadronizaÃ§Ã£o)

```php
/**
 * PadronizaÃ§Ã£o de todas as respostas da API
 */
class ApiResponse
{
    public static function success($data = null, string $message = '', int $code = 200)
    {
        return response()->setJSON([
            'success' => true,
            'data' => $data,
            'message' => $message,
            'timestamp' => time(),
            'api_version' => 'v1'
        ])->setStatusCode($code);
    }
    
    public static function error(string $message, int $code = 400, $errors = null)
    {
        return response()->setJSON([
            'success' => false,
            'message' => $message,
            'errors' => $errors,
            'timestamp' => time(),
            'api_version' => 'v1'
        ])->setStatusCode($code);
    }
}
```

#### 3.3. MÃºltiplos Bancos de Dados

```php
/**
 * ConfiguraÃ§Ã£o em app/Config/Database.php
 */
class Database extends Config
{
    public $default = [
        'DSN'      => '',
        'hostname' => 'localhost',
        'username' => 'root',
        'password' => '',
        'database' => 'db_users',
        // Banco principal: usuÃ¡rios, autenticaÃ§Ã£o
    ];
    
    public $customers = [
        'DSN'      => '',
        'hostname' => 'localhost',
        'username' => 'root',
        'password' => '',
        'database' => 'db_customers',
        // Banco secundÃ¡rio: clientes, arquivos
    ];
    
    public $logs = [
        'DSN'      => '',
        'hostname' => 'localhost',
        'username' => 'root',
        'password' => '',
        'database' => 'db_logs',
        // Banco de auditoria: logs, requisiÃ§Ãµes
    ];
}

/**
 * Uso nos Models
 */
class UserCustomerResourceModel extends BaseResourceModel
{
    protected $DBGroup = 'customers'; // Usa banco 'customers'
}

class LogResourceModel extends BaseResourceModel
{
    protected $DBGroup = 'logs'; // Usa banco 'logs'
}
```

---

## ğŸ“± Frontend Flutter

### 1. Arquitetura DDD (Domain-Driven Design)

```
lib/
â”œâ”€â”€ app/                          # ConfiguraÃ§Ã£o da aplicaÃ§Ã£o
â”‚   â”œâ”€â”€ router/                   # Sistema de rotas
â”‚   â”‚   â”œâ”€â”€ app_router.dart      # DefiniÃ§Ã£o de rotas
â”‚   â”‚   â””â”€â”€ app_routes.dart      # Constantes de rotas
â”‚   â”œâ”€â”€ theme/                    # Tema e cores
â”‚   â”‚   â”œâ”€â”€ app_theme.dart
â”‚   â”‚   â””â”€â”€ color_schemes.dart
â”‚   â””â”€â”€ app.dart                  # App principal
â”‚
â”œâ”€â”€ core/                         # NÃºcleo compartilhado
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ env.dart             # VariÃ¡veis de ambiente
â”‚   â”œâ”€â”€ errors/
â”‚   â”‚   â”œâ”€â”€ app_exception.dart   # ExceÃ§Ãµes customizadas
â”‚   â”‚   â””â”€â”€ failure.dart         # Tratamento de falhas
â”‚   â”œâ”€â”€ network/
â”‚   â”‚   â”œâ”€â”€ interceptors/        # Interceptors HTTP
â”‚   â”‚   â”œâ”€â”€ api_endpoints.dart   # Endpoints da API
â”‚   â”‚   â””â”€â”€ dio_client.dart      # Cliente HTTP (Dio)
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ debouncer.dart       # Debounce para inputs
â”‚   â”‚   â””â”€â”€ validators.dart      # ValidaÃ§Ãµes
â”‚   â””â”€â”€ widgets/
â”‚       â”œâ”€â”€ app_dialog.dart      # DiÃ¡logos padrÃ£o
â”‚       â”œâ”€â”€ app_loader.dart      # Loading screens
â”‚       â”œâ”€â”€ app_scaffold.dart    # Scaffold base
â”‚       â””â”€â”€ app_snackbar.dart    # Snackbars
â”‚
â”œâ”€â”€ features/                     # Features por domÃ­nio
â”‚   â”œâ”€â”€ user/
â”‚   â”‚   â”œâ”€â”€ domain/              # Camada de DomÃ­nio
â”‚   â”‚   â”‚   â”œâ”€â”€ entities/        # Entidades puras
â”‚   â”‚   â”‚   â”œâ”€â”€ repositories/    # Contratos de repositÃ³rios
â”‚   â”‚   â”‚   â””â”€â”€ usecases/        # Casos de uso
â”‚   â”‚   â”œâ”€â”€ data/                # Camada de Dados
â”‚   â”‚   â”‚   â”œâ”€â”€ models/          # DTOs
â”‚   â”‚   â”‚   â”œâ”€â”€ datasources/     # APIs, Local Storage
â”‚   â”‚   â”‚   â””â”€â”€ repositories/    # ImplementaÃ§Ã£o
â”‚   â”‚   â”œâ”€â”€ application/         # Camada de AplicaÃ§Ã£o
â”‚   â”‚   â”‚   â”œâ”€â”€ providers/       # State Management (Riverpod)
â”‚   â”‚   â”‚   â””â”€â”€ controllers/     # Controladores
â”‚   â”‚   â””â”€â”€ presentation/        # Camada de ApresentaÃ§Ã£o
â”‚   â”‚       â”œâ”€â”€ screens/         # Telas
â”‚   â”‚       â””â”€â”€ widgets/         # Componentes UI
â”‚   â”‚
â”‚   â””â”€â”€ home/
â”‚       â””â”€â”€ [mesma estrutura]
â”‚
â””â”€â”€ shared/                       # Recursos compartilhados
    â”œâ”€â”€ utils/
    â””â”€â”€ widgets/
```

### 2. Fluxo de Dados no Flutter

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PRESENTATION LAYER                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚  LoginScreen â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ LoginButton â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                   â”‚ onPressed()               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   APPLICATION LAYER                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚         UserController / Provider                  â”‚       â”‚
â”‚  â”‚  â€¢ Gerencia estado da UI                           â”‚       â”‚
â”‚  â”‚  â€¢ Chama casos de uso                              â”‚       â”‚
â”‚  â”‚  â€¢ Trata loading/success/error                     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                        â”‚ loginUseCase.call()                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DOMAIN LAYER                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚              LoginUseCase                          â”‚       â”‚
â”‚  â”‚  â€¢ LÃ³gica de negÃ³cio pura                          â”‚       â”‚
â”‚  â”‚  â€¢ Independente de framework                       â”‚       â”‚
â”‚  â”‚  â€¢ Chama repositÃ³rio                               â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                        â”‚ repository.login()                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚         IUserRepository (Interface)                â”‚       â”‚
â”‚  â”‚  â€¢ Contrato de acesso a dados                      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DATA LAYER                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚      UserRepositoryImpl (ImplementaÃ§Ã£o)            â”‚       â”‚
â”‚  â”‚  â€¢ Implementa IUserRepository                      â”‚       â”‚
â”‚  â”‚  â€¢ Orquestra datasources                           â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                        â”‚                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚         â”‚              â”‚              â”‚                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚   Remote    â”‚ â”‚   Local    â”‚  â”‚  Cache   â”‚                 â”‚
â”‚  â”‚ DataSource  â”‚ â”‚ DataSource â”‚  â”‚DataSourceâ”‚                 â”‚
â”‚  â”‚   (API)     â”‚ â”‚ (Storage)  â”‚  â”‚(Memory)  â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DioClient      â”‚ â† Interceptors JWT, Error Handling
â”‚   (HTTP)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CodeIgniter 4   â”‚
â”‚    API REST      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Exemplo de ImplementaÃ§Ã£o

#### 3.1. DioClient (Network)

```dart
class DioClient {
  final Dio _dio;
  
  DioClient() : _dio = Dio(BaseOptions(
    baseUrl: Env.apiBaseUrl,
    connectTimeout: const Duration(seconds: 30),
    receiveTimeout: const Duration(seconds: 30),
  )) {
    _setupInterceptors();
  }
  
  void _setupInterceptors() {
    _dio.interceptors.add(
      InterceptorsWrapper(
        onRequest: (options, handler) async {
          // Adiciona JWT token
          final token = await LocalStorage.getToken();
          if (token != null) {
            options.headers['Authorization'] = 'Bearer $token';
          }
          return handler.next(options);
        },
        onError: (error, handler) {
          // Trata erros globalmente
          if (error.response?.statusCode == 401) {
            // Redireciona para login
            AppRouter.goToLogin();
          }
          return handler.next(error);
        },
      ),
    );
  }
}
```

#### 3.2. UseCase (Domain)

```dart
class LoginUseCase {
  final IUserRepository _repository;
  
  LoginUseCase(this._repository);
  
  Future<Either<Failure, UserEntity>> call({
    required String email,
    required String password,
  }) async {
    // ValidaÃ§Ã£o de negÃ³cio
    if (!EmailValidator.isValid(email)) {
      return Left(ValidationFailure('Email invÃ¡lido'));
    }
    
    // Chama repositÃ³rio
    return await _repository.login(
      email: email,
      password: password,
    );
  }
}
```

---

## âš›ï¸ Frontend React

### 1. Estrutura de Componentes

```
src/
â”œâ”€â”€ components/                   # Componentes reutilizÃ¡veis
â”‚   â”œâ”€â”€ Auth/
â”‚   â”‚   â””â”€â”€ useSession.js        # Hook de autenticaÃ§Ã£o
â”‚   â”‚
â”‚   â”œâ”€â”€ HForm/                   # Componentes de formulÃ¡rio
â”‚   â”‚   â”œâ”€â”€ HformInputTextLetters/
â”‚   â”‚   â”œâ”€â”€ HformInputTextMask/
â”‚   â”‚   â””â”€â”€ HformInputTextNumber/
â”‚   â”‚
â”‚   â”œâ”€â”€ HcButton/                # BotÃµes customizados
â”‚   â”‚   â”œâ”€â”€ HcListActions/       # BotÃµes de aÃ§Ã£o em lista
â”‚   â”‚   â”œâ”€â”€ index.jsx
â”‚   â”‚   â””â”€â”€ styles.css
â”‚   â”‚
â”‚   â”œâ”€â”€ HcModal/                 # Sistema de modais
â”‚   â”‚   â”œâ”€â”€ HcBasicModal/
â”‚   â”‚   â”œâ”€â”€ HcFadeModal/
â”‚   â”‚   â”œâ”€â”€ HcSlideUpDownModal/
â”‚   â”‚   â””â”€â”€ [outros tipos de animaÃ§Ã£o]
â”‚   â”‚
â”‚   â”œâ”€â”€ HcMessage/               # Sistema de mensagens
â”‚   â”‚   â”œâ”€â”€ HcToasts/
â”‚   â”‚   â”œâ”€â”€ index.jsx
â”‚   â”‚   â””â”€â”€ styles.css
â”‚   â”‚
â”‚   â”œâ”€â”€ HcNavMenu/               # NavegaÃ§Ã£o
â”‚   â”‚   â”œâ”€â”€ HcNavHorizontal/
â”‚   â”‚   â””â”€â”€ HcNavVertical/
â”‚   â”‚
â”‚   â””â”€â”€ HcLoading/               # Loading states
â”‚
â”œâ”€â”€ config/                      # ConfiguraÃ§Ãµes
â”œâ”€â”€ contexts/                    # Context API (State)
â”œâ”€â”€ hooks/                       # Custom Hooks
â”œâ”€â”€ middlewares/                 # Middlewares (Auth, etc)
â”œâ”€â”€ pages/                       # PÃ¡ginas da aplicaÃ§Ã£o
â”œâ”€â”€ routes/                      # DefiniÃ§Ã£o de rotas
â”œâ”€â”€ services/                    # ServiÃ§os de API
â””â”€â”€ utils/                       # UtilitÃ¡rios
```

### 2. Fluxo de Dados no React

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         COMPONENT                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚              UserListPage.jsx                       â”‚      â”‚
â”‚  â”‚                                                     â”‚      â”‚
â”‚  â”‚  useEffect(() => {                                  â”‚      â”‚
â”‚  â”‚    loadUsers(); // â—€â”€â”€ Carrega dados ao montar     â”‚      â”‚
â”‚  â”‚  }, []);                                            â”‚      â”‚
â”‚  â”‚                                                     â”‚      â”‚
â”‚  â”‚  const loadUsers = async () => {                    â”‚      â”‚
â”‚  â”‚    setLoading(true);                                â”‚      â”‚
â”‚  â”‚    const result = await userService.getAll();       â”‚      â”‚
â”‚  â”‚    setUsers(result.data);                           â”‚      â”‚
â”‚  â”‚    setLoading(false);                               â”‚      â”‚
â”‚  â”‚  };                                                 â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CUSTOM HOOK                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚              useSession.js                          â”‚      â”‚
â”‚  â”‚                                                     â”‚      â”‚
â”‚  â”‚  const useSession = () => {                         â”‚      â”‚
â”‚  â”‚    const [token, setToken] = useState(null);        â”‚      â”‚
â”‚  â”‚    const [user, setUser] = useState(null);          â”‚      â”‚
â”‚  â”‚                                                     â”‚      â”‚
â”‚  â”‚    useEffect(() => {                                â”‚      â”‚
â”‚  â”‚      // Recupera token do localStorage              â”‚      â”‚
â”‚  â”‚      const savedToken = localStorage.getItem('jwt');â”‚      â”‚
â”‚  â”‚      if (savedToken) {                              â”‚      â”‚
â”‚  â”‚        setToken(savedToken);                        â”‚      â”‚
â”‚  â”‚        validateToken(savedToken);                   â”‚      â”‚
â”‚  â”‚      }                                              â”‚      â”‚
â”‚  â”‚    }, []);                                          â”‚      â”‚
â”‚  â”‚                                                     â”‚      â”‚
â”‚  â”‚    return { token, user, login, logout };           â”‚      â”‚
â”‚  â”‚  };                                                 â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SERVICE LAYER                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚            userService.js (Axios)                   â”‚      â”‚
â”‚  â”‚                                                     â”‚      â”‚
â”‚  â”‚  import axios from 'axios';                         â”‚      â”‚
â”‚  â”‚                                                     â”‚      â”‚
â”‚  â”‚  const API_URL = process.env.REACT_APP_API_URL;     â”‚      â”‚
â”‚  â”‚                                                     â”‚      â”‚
â”‚  â”‚  const userService = {                              â”‚      â”‚
â”‚  â”‚    getAll: async (params) => {                      â”‚      â”‚
â”‚  â”‚      const response = await axios.get(              â”‚      â”‚
â”‚  â”‚        `${API_URL}/api/v1/user-customer`,           â”‚      â”‚
â”‚  â”‚        {                                            â”‚      â”‚
â”‚  â”‚          params,                                    â”‚      â”‚
â”‚  â”‚          headers: {                                 â”‚      â”‚
â”‚  â”‚            Authorization: `Bearer ${token}`         â”‚      â”‚
â”‚  â”‚          }                                          â”‚      â”‚
â”‚  â”‚        }                                            â”‚      â”‚
â”‚  â”‚      );                                             â”‚      â”‚
â”‚  â”‚      return response.data;                          â”‚      â”‚
â”‚  â”‚    },                                               â”‚      â”‚
â”‚  â”‚                                                     â”‚      â”‚
â”‚  â”‚    create: async (data) => { ... },                 â”‚      â”‚
â”‚  â”‚    update: async (id, data) => { ... },             â”‚      â”‚
â”‚  â”‚    delete: async (id) => { ... }                    â”‚      â”‚
â”‚  â”‚  };                                                 â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     AXIOS INTERCEPTOR                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  // Interceptor de Request                                â”‚      â”‚
â”‚  â”‚  axios.interceptors.request.use(                          â”‚      â”‚
â”‚  â”‚    (config) => {                                          â”‚      â”‚
â”‚  â”‚      const token = localStorage.getItem('jwt');           â”‚      â”‚
â”‚  â”‚      if (token) {                                         â”‚      â”‚
â”‚  â”‚        config.headers.Authorization = `Bearer ${token}`;  â”‚      â”‚
â”‚  â”‚      }                                                    â”‚      â”‚
â”‚  â”‚      return config;                                       â”‚      â”‚
â”‚  â”‚    }                                                      â”‚      â”‚
â”‚  â”‚  );                                                       â”‚      â”‚
â”‚  â”‚                                                           â”‚      â”‚
â”‚  â”‚  // Interceptor de Response                               â”‚      â”‚
â”‚  â”‚  axios.interceptors.response.use(                         â”‚      â”‚
â”‚  â”‚    (response) => response,                                â”‚      â”‚
â”‚  â”‚    (error) => {                                           â”‚      â”‚
â”‚  â”‚      if (error.response?.status === 401) {                â”‚      â”‚
â”‚  â”‚        // Token expirado - redireciona login              â”‚      â”‚
â”‚  â”‚        localStorage.removeItem('jwt');                    â”‚      â”‚
â”‚  â”‚        window.location.href = '/login';                   â”‚      â”‚
â”‚  â”‚      }                                                    â”‚      â”‚
â”‚  â”‚      return Promise.reject(error);                        â”‚      â”‚
â”‚  â”‚    }                                                      â”‚      â”‚
â”‚  â”‚  );                                                       â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Componentes Customizados (Pattern)

#### 3.1. HcButton (BotÃ£o ReutilizÃ¡vel)

```jsx
// components/HcButton/index.jsx
import React from 'react';
import './styles.css';

export const HcButton = ({ 
  children, 
  variant = 'primary', 
  size = 'medium',
  loading = false,
  disabled = false,
  onClick,
  icon,
  ...props 
}) => {
  return (
    <button
      className={`hc-button hc-button--${variant} hc-button--${size}`}
      disabled={disabled || loading}
      onClick={onClick}
      {...props}
    >
      {loading ? (
        <span className="hc-button__spinner" />
      ) : (
        <>
          {icon && <span className="hc-button__icon">{icon}</span>}
          <span className="hc-button__text">{children}</span>
        </>
      )}
    </button>
  );
};

// Uso:
<HcButton 
  variant="success" 
  size="large"
  onClick={handleSave}
  loading={isSaving}
>
  Salvar
</HcButton>
```

#### 3.2. HcModal (Sistema de Modais)

```jsx
// components/HcModal/HcFadeModal/index.jsx
import React from 'react';
import './styles.css';

export const HcFadeModal = ({ 
  isOpen, 
  onClose, 
  title, 
  children,
  footer 
}) => {
  if (!isOpen) return null;
  
  return (
    <div className="hc-modal-overlay" onClick={onClose}>
      <div 
        className="hc-modal-content hc-modal--fade"
        onClick={(e) => e.stopPropagation()}
      >
        <div className="hc-modal__header">
          <h2>{title}</h2>
          <button onClick={onClose}>Ã—</button>
        </div>
        
        <div className="hc-modal__body">
          {children}
        </div>
        
        {footer && (
          <div className="hc-modal__footer">
            {footer}
          </div>
        )}
      </div>
    </div>
  );
};

// Uso:
<HcFadeModal
  isOpen={showModal}
  onClose={() => setShowModal(false)}
  title="Confirmar exclusÃ£o"
  footer={
    <>
      <HcButton variant="secondary" onClick={() => setShowModal(false)}>
        Cancelar
      </HcButton>
      <HcButton variant="danger" onClick={handleDelete}>
        Excluir
      </HcButton>
    </>
  }
>
  <p>Tem certeza que deseja excluir este registro?</p>
</HcFadeModal>
```

---

## ğŸ”„ Fluxos de Dados

### 1. Fluxo Completo: Cadastro de Cliente

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   React    â”‚ 1. UsuÃ¡rio preenche formulÃ¡rio
â”‚  (Form)    â”‚    HForm/HformInputText*
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚ 2. Submit (validaÃ§Ã£o client-side)
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  userService.create(formData)                          â”‚
â”‚  POST /api/v1/user-customer                            â”‚
â”‚  Headers: { Authorization: Bearer eyJ... }             â”‚
â”‚  Body: { name, email, cpf, ... }                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ 3. RequisiÃ§Ã£o HTTP
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CodeIgniter 4 API                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ AuthFilter: Valida JWT                           â”‚  â”‚
â”‚  â”‚ âœ“ Token vÃ¡lido â†’ Injeta CurrentUser              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                   â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ LogRequestFilter: Registra entrada               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                   â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Controller: UserCustomer/ManagerController       â”‚  â”‚
â”‚  â”‚ â€¢ MÃ©todo: store()                                â”‚  â”‚
â”‚  â”‚ â€¢ Valida com StoreRequest                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                   â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Request: StoreRequest                            â”‚  â”‚
â”‚  â”‚ â€¢ Valida CPF (formato + Ãºnico)                   â”‚  â”‚
â”‚  â”‚ â€¢ Valida Email (formato + Ãºnico)                 â”‚  â”‚
â”‚  â”‚ â€¢ Sanitiza dados                                 â”‚  â”‚
â”‚  â”‚ â€¢ Aplica StoreRules                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                   â”‚ 4. Dados validados                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Service: UserCustomer/ManagerService             â”‚  â”‚
â”‚  â”‚ â€¢ create(validated_data)                         â”‚  â”‚
â”‚  â”‚ â€¢ Inicia transaÃ§Ã£o                               â”‚  â”‚
â”‚  â”‚ â€¢ Cria registro principal                        â”‚  â”‚
â”‚  â”‚ â€¢ Processa upload de arquivo (se houver)         â”‚  â”‚
â”‚  â”‚ â€¢ Registra log de criaÃ§Ã£o                        â”‚  â”‚
â”‚  â”‚ â€¢ Commit transaÃ§Ã£o                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                   â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Model: UserCustomer/ResourceModel                â”‚  â”‚
â”‚  â”‚ â€¢ insert(data)                                   â”‚  â”‚
â”‚  â”‚ â€¢ DBGroup: 'customers'                           â”‚  â”‚
â”‚  â”‚ â€¢ created_at: TIMESTAMP                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                   â”‚ 5. Registro criado (ID: 156)       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Service: UploadService                           â”‚  â”‚
â”‚  â”‚ â€¢ processUpload($file, $user_customer_id)        â”‚  â”‚
â”‚  â”‚ â€¢ Valida tipo/tamanho                            â”‚  â”‚
â”‚  â”‚ â€¢ Move para writable/uploads/                    â”‚  â”‚
â”‚  â”‚ â€¢ Cria registro em FileModel                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                   â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ LogRequestFilter: Registra saÃ­da                 â”‚  â”‚
â”‚  â”‚ â€¢ status: 201                                    â”‚  â”‚
â”‚  â”‚ â€¢ execution_time: 247ms                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                   â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ApiResponse::success()                           â”‚  â”‚
â”‚  â”‚ {                                                â”‚  â”‚
â”‚  â”‚   "success": true,                               â”‚  â”‚
â”‚  â”‚   "data": {                                      â”‚  â”‚
â”‚  â”‚     "id": 156,                                   â”‚  â”‚
â”‚  â”‚     "name": "JoÃ£o Silva",                        â”‚  â”‚
â”‚  â”‚     "email": "joao@example.com",                 â”‚  â”‚
â”‚  â”‚     "created_at": "2025-12-15 14:30:00"          â”‚  â”‚
â”‚  â”‚   },                                             â”‚  â”‚
â”‚  â”‚   "message": "Cliente criado com sucesso"        â”‚  â”‚
â”‚  â”‚ }                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚ 6. Response (HTTP 201)
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React Component                                       â”‚
â”‚  â€¢ Recebe resposta                                     â”‚
â”‚  â€¢ Atualiza lista de clientes                          â”‚
â”‚  â€¢ Exibe HcMessage (Toast de sucesso)                  â”‚
â”‚  â€¢ Fecha HcModal                                       â”‚
â”‚  â€¢ Limpa formulÃ¡rio                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Fluxo de Upload de Arquivo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   React    â”‚ 1. UsuÃ¡rio seleciona arquivo
â”‚  (Input)   â”‚    <input type="file" onChange={handleFileChange} />
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚ 2. Prepara FormData
      â”‚    formData.append('file', file)
      â”‚    formData.append('user_customer_id', 156)
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  userFileService.upload(formData)                      â”‚
â”‚  POST /api/v1/user-customer-file                       â”‚
â”‚  Headers: {                                            â”‚
â”‚    Authorization: Bearer eyJ...,                       â”‚
â”‚    Content-Type: multipart/form-data                   â”‚
â”‚  }                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CodeIgniter 4 API                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Controller: UserCustomerFile/ManagerController   â”‚  â”‚
â”‚  â”‚ â€¢ MÃ©todo: store()                                â”‚  â”‚
â”‚  â”‚ â€¢ Valida request                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                   â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Service: UploadService                           â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚ processUpload($file, $userId) {                  â”‚  â”‚
â”‚  â”‚   // 1. ValidaÃ§Ãµes                               â”‚  â”‚
â”‚  â”‚   if (!$this->validateFileType($file)) {         â”‚  â”‚
â”‚  â”‚     throw new ValidationException();             â”‚  â”‚
â”‚  â”‚   }                                              â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚   if ($file->getSize() > MAX_SIZE) {             â”‚  â”‚
â”‚  â”‚     throw new FileSizeException();               â”‚  â”‚
â”‚  â”‚   }                                              â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚   // 2. Gera nome Ãºnico                          â”‚  â”‚
â”‚  â”‚   $filename = uniqid() . '_' . $file->getName(); â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚   // 3. Move arquivo                             â”‚  â”‚
â”‚  â”‚   $path = WRITEPATH . 'uploads/' . $filename;    â”‚  â”‚
â”‚  â”‚   $file->move($path);                            â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚   // 4. Registra no banco                        â”‚  â”‚
â”‚  â”‚   $fileModel->insert([                           â”‚  â”‚
â”‚  â”‚     'user_customer_id' => $userId,               â”‚  â”‚
â”‚  â”‚     'original_name' => $file->getName(),         â”‚  â”‚
â”‚  â”‚     'stored_name' => $filename,                  â”‚  â”‚
â”‚  â”‚     'mime_type' => $file->getMimeType(),         â”‚  â”‚
â”‚  â”‚     'size' => $file->getSize(),                  â”‚  â”‚
â”‚  â”‚     'path' => $path                              â”‚  â”‚
â”‚  â”‚   ]);                                            â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚   return $filename;                              â”‚  â”‚
â”‚  â”‚ }                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                   â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Model: FileModel                                 â”‚  â”‚
â”‚  â”‚ â€¢ DBGroup: 'customers'                           â”‚  â”‚
â”‚  â”‚ â€¢ Tabela: user_customer_files                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                   â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Response                                         â”‚  â”‚
â”‚  â”‚ {                                                â”‚  â”‚
â”‚  â”‚   "success": true,                               â”‚  â”‚
â”‚  â”‚   "data": {                                      â”‚  â”‚
â”‚  â”‚     "id": 89,                                    â”‚  â”‚
â”‚  â”‚     "filename": "documento.pdf",                 â”‚  â”‚
â”‚  â”‚     "size": "1.2 MB",                            â”‚  â”‚
â”‚  â”‚     "uploaded_at": "2025-12-15 14:35:00"         â”‚  â”‚
â”‚  â”‚   }                                              â”‚  â”‚
â”‚  â”‚ }                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… Code Review e Boas PrÃ¡ticas

### 1. Estrutura de Versionamento

O projeto implementa versionamento robusto em todas as camadas:

```
âœ“ Controllers: app/Controllers/API/v1/
âœ“ Requests:    app/Requests/v1/
âœ“ Services:    app/Services/v1/
âœ“ Models:      app/Models/v1/
âœ“ Rules:       app/Rules/v1/
âœ“ Filters:     app/Filters/v1/
âœ“ Routes:      app/Routes/API/v1/
```

**BenefÃ­cios:**
- EvoluÃ§Ã£o da API sem quebrar clientes antigos
- Facilita testes A/B
- Permite migraÃ§Ã£o gradual de features

### 2. PadrÃ£o de Nomenclatura

#### 2.1. Backend (CodeIgniter)

```php
// âœ“ CORRETO - PascalCase para classes
UserManagement/ManagerController.php
UserCustomer/ResourceModel.php
Auth/AuthenticationService.php

// âœ“ CORRETO - camelCase para mÃ©todos
public function getUserById(int $id)
public function createNewUser(array $data)

// âœ“ CORRETO - snake_case para banco de dados
table: user_customers
column: created_at, deleted_at

// âœ“ CORRETO - UPPERCASE para constantes
define('MAX_UPLOAD_SIZE', 5242880);
```

#### 2.2. Frontend (React/Flutter)

```javascript
// âœ“ CORRETO - PascalCase para componentes React
const UserListPage = () => { ... }
const HcButton = ({ ... }) => { ... }

// âœ“ CORRETO - camelCase para funÃ§Ãµes
const handleSubmit = () => { ... }
const loadUserData = async () => { ... }

// âœ“ CORRETO - UPPER_SNAKE_CASE para constantes
const API_BASE_URL = process.env.REACT_APP_API_URL;
const MAX_RETRY_ATTEMPTS = 3;
```

```dart
// âœ“ CORRETO - PascalCase para classes Dart
class LoginUseCase { ... }
class UserEntity { ... }

// âœ“ CORRETO - camelCase para variÃ¡veis
final userId = 123;
final isAuthenticated = true;

// âœ“ CORRETO - snake_case para arquivos
login_screen.dart
user_repository.dart
```

### 3. SeparaÃ§Ã£o de Responsabilidades

#### Antes do Code Review (âŒ)

```php
// âŒ RUIM - Controller com lÃ³gica de negÃ³cio
class UserController extends BaseController
{
    public function create()
    {
        // ValidaÃ§Ã£o no controller
        if (empty($this->request->getPost('email'))) {
            return $this->response->setJSON(['error' => 'Email obrigatÃ³rio']);
        }
        
        // LÃ³gica de negÃ³cio no controller
        $password = password_hash($this->request->getPost('password'), PASSWORD_DEFAULT);
        
        // Acesso direto ao banco no controller
        $db = \Config\Database::connect();
        $query = "INSERT INTO users (email, password) VALUES (?, ?)";
        $db->query($query, [$email, $password]);
        
        return $this->response->setJSON(['success' => true]);
    }
}
```

#### ApÃ³s Code Review (âœ“)

```php
// âœ“ BOM - Controller limpo, apenas orquestraÃ§Ã£o
class ManagerController extends BaseManagerController
{
    public function create()
    {
        // 1. Valida com Request dedicado
        $validated = $this->validate(StoreRequest::class);
        
        // 2. Delega lÃ³gica ao Service
        $user = $this->managerService->create($validated);
        
        // 3. Retorna resposta padronizada
        return ApiResponse::success($user, 'UsuÃ¡rio criado com sucesso', 201);
    }
}

// âœ“ ValidaÃ§Ã£o em Request separado
class StoreRequest extends IncomingRequest
{
    public function rules(): array
    {
        return [
            'email' => 'required|valid_email|is_unique[users.email]',
            'password' => 'required|min_length[6]',
        ];
    }
}

// âœ“ LÃ³gica de negÃ³cio em Service
class ManagerService extends BaseManagerService
{
    public function create(array $data): array
    {
        // Hash de senha
        $data['password'] = $this->passwordService->hash($data['password']);
        
        // Inicia transaÃ§Ã£o
        $this->db->transStart();
        
        try {
            // Cria usuÃ¡rio
            $userId = $this->model->insert($data);
            
            // Registra log
            $this->logService->create([
                'action' => 'user_created',
                'user_id' => $userId
            ]);
            
            $this->db->transComplete();
            
            return $this->model->find($userId);
        } catch (\Exception $e) {
            $this->db->transRollback();
            throw $e;
        }
    }
}
```

### 4. Tratamento de Erros

```php
// âœ“ ExceÃ§Ãµes customizadas
class NotFoundException extends \RuntimeException
{
    public function __construct($message = 'Recurso nÃ£o encontrado')
    {
        parent::__construct($message, 404);
    }
}

class ValidationException extends \RuntimeException
{
    private array $errors;
    
    public function __construct(array $errors)
    {
        $this->errors = $errors;
        parent::__construct('Erro de validaÃ§Ã£o', 422);
    }
}

// âœ“ Uso em Services
public function findById(int $id)
{
    $user = $this->model->find($id);
    
    if (!$user) {
        throw new NotFoundException("UsuÃ¡rio #{$id} nÃ£o encontrado");
    }
    
    return $user;
}

// âœ“ Tratamento global em BaseController
protected function handleException(\Throwable $e)
{
    if ($e instanceof NotFoundException) {
        return ApiResponse::error($e->getMessage(), 404);
    }
    
    if ($e instanceof ValidationException) {
        return ApiResponse::error('Dados invÃ¡lidos', 422, $e->getErrors());
    }
    
    // Log erro inesperado
    log_message('error', $e->getMessage());
    
    return ApiResponse::error('Erro interno do servidor', 500);
}
```

### 5. Arquivos de Backup e IteraÃ§Ãµes

```
# Arquivos encontrados no projeto:
*.bkp       # Backup antes de refatoraÃ§Ã£o
*.ia        # VersÃµes geradas/assistidas por IA
*.ia_       # VersÃµes antigas com IA
*.md        # DocumentaÃ§Ã£o de decisÃµes tÃ©cnicas

Exemplo:
â”œâ”€â”€ BaseResourceModel.bkp      # VersÃ£o anterior do model base
â”œâ”€â”€ BaseResourceModel.ia       # Primeira tentativa com IA
â””â”€â”€ BaseResourceModel.php      # VersÃ£o final revisada

# âœ“ Boas prÃ¡ticas identificadas:
â€¢ MantÃ©m histÃ³rico de mudanÃ§as importantes
â€¢ Documenta decisÃµes tÃ©cnicas em .md
â€¢ Facilita rollback se necessÃ¡rio
```

### 6. PadrÃµes de SeguranÃ§a

```php
// âœ“ SanitizaÃ§Ã£o de inputs
class StoreRequest extends IncomingRequest
{
    public function sanitize(): array
    {
        return [
            'name' => sanitize_string($this->getVar('name')),
            'email' => filter_var($this->getVar('email'), FILTER_SANITIZE_EMAIL),
            'cpf' => preg_replace('/[^0-9]/', '', $this->getVar('cpf')),
        ];
    }
}

// âœ“ Prepared Statements (Query Builder)
$this->db->table('users')
    ->where('email', $email)  // AutomÃ¡tico prepared statement
    ->get()
    ->getRowArray();

// âœ“ CSRF Protection
public $csrf = [
    'csrf_enable' => true,
    'csrf_token_name' => 'csrf_token',
    'csrf_cookie_name' => 'csrf_cookie',
    'csrf_expire' => 7200,
];

// âœ“ CORS configurado
class Cors extends BaseConfig
{
    public $allowedOrigins = [
        'https://app.governo.rj.gov.br',
        'https://app-dev.governo.rj.gov.br'
    ];
    
    public $allowedMethods = ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'];
    
    public $allowedHeaders = [
        'Content-Type',
        'Authorization',
        'X-Requested-With'
    ];
}
```

---

## ğŸ” SeguranÃ§a e AutenticaÃ§Ã£o

### 1. Sistema JWT (Firebase JWT)

```php
// LocalizaÃ§Ã£o: app/ThirdParty/Firebase/JWT/
use Firebase\JWT\JWT;
use Firebase\JWT\Key;

class TokenService
{
    private string $secretKey;
    private string $algorithm = 'HS256';
    private int $expirationTime = 3600; // 1 hora
    
    public function generate(array $payload): string
    {
        $issuedAt = time();
        $expirationTime = $issuedAt + $this->expirationTime;
        
        $token = [
            'iss' => base_url(),                    // Issuer
            'aud' => base_url(),                    // Audience
            'iat' => $issuedAt,                     // Issued at
            'nbf' => $issuedAt,                     // Not before
            'exp' => $expirationTime,               // Expiration
            'data' => $payload                      // User data
        ];
        
        return JWT::encode($token, $this->secretKey, $this->algorithm);
    }
    
    public function validate(string $token): ?array
    {
        try {
            $decoded = JWT::decode($token, new Key($this->secretKey, $this->algorithm));
            return (array) $decoded->data;
        } catch (\Exception $e) {
            log_message('error', 'JWT Validation Error: ' . $e->getMessage());
            return null;
        }
    }
}
```

### 2. AuthFilter (Middleware)

```php
class AuthFilter implements FilterInterface
{
    public function before(RequestInterface $request, $arguments = null)
    {
        // 1. Extrai token do header
        $authHeader = $request->getHeaderLine('Authorization');
        
        if (!$authHeader || !preg_match('/Bearer\s+(.*)$/i', $authHeader, $matches)) {
            return Services::response()
                ->setJSON(['error' => 'Token nÃ£o fornecido'])
                ->setStatusCode(401);
        }
        
        $token = $matches[1];
        
        // 2. Valida token
        $tokenService = new TokenService();
        $userData = $tokenService->validate($token);
        
        if (!$userData) {
            return Services::response()
                ->setJSON(['error' => 'Token invÃ¡lido ou expirado'])
                ->setStatusCode(401);
        }
        
        // 3. Injeta dados do usuÃ¡rio autenticado
        CurrentUser::set($userData);
        
        // 4. Verifica permissÃµes (se necessÃ¡rio)
        if ($arguments && !$this->checkPermissions($userData, $arguments)) {
            return Services::response()
                ->setJSON(['error' => 'PermissÃ£o negada'])
                ->setStatusCode(403);
        }
        
        return $request;
    }
    
    private function checkPermissions(array $user, array $requiredRoles): bool
    {
        return in_array($user['role'], $requiredRoles);
    }
}
```

### 3. AplicaÃ§Ã£o de Filtros nas Rotas

```php
// app/Routes/API/v1/UserManagement/api_routes.php
$routes->group('user-management', ['namespace' => 'App\Controllers\API\v1\UserManagement'], function($routes) {
    
    // Rota pÃºblica (sem filtro)
    $routes->post('login', 'AuthController::login');
    
    // Rotas protegidas (com AuthFilter)
    $routes->group('', ['filter' => 'auth'], function($routes) {
        $routes->get('/', 'ManagerController::index');
        $routes->post('/', 'ManagerController::create');
        $routes->put('(:num)', 'ManagerController::update/$1');
        $routes->delete('(:num)', 'ManagerController::delete/$1');
    });
    
    // Rotas apenas para admin (com permissÃ£o especÃ­fica)
    $routes->group('', ['filter' => 'auth:admin'], function($routes) {
        $routes->get('logs', 'ManagerController::logs');
        $routes->post('bulk-delete', 'ManagerController::bulkDelete');
    });
});
```

### 4. Password Service

```php
class PasswordService
{
    public function hash(string $password): string
    {
        return password_hash($password, PASSWORD_ARGON2ID, [
            'memory_cost' => 65536,
            'time_cost' => 4,
            'threads' => 3
        ]);
    }
    
    public function verify(string $password, string $hash): bool
    {
        return password_verify($password, $hash);
    }
    
    public function needsRehash(string $hash): bool
    {
        return password_needs_rehash($hash, PASSWORD_ARGON2ID);
    }
}
```

### 5. Rate Limiting (Middleware)

```php
// ProteÃ§Ã£o contra brute force
class RateLimitFilter implements FilterInterface
{
    private int $maxAttempts = 5;
    private int $decayMinutes = 1;
    
    public function before(RequestInterface $request, $arguments = null)
    {
        $key = $this->resolveRequestSignature($request);
        
        if ($this->tooManyAttempts($key)) {
            return Services::response()
                ->setJSON(['error' => 'Muitas tentativas. Tente novamente em 1 minuto.'])
                ->setStatusCode(429);
        }
        
        $this->incrementAttempts($key);
        
        return $request;
    }
    
    private function resolveRequestSignature(RequestInterface $request): string
    {
        return sha1(
            $request->getIPAddress() . '|' . $request->getUri()
        );
    }
}
```

---

## ğŸ“Š ConclusÃ£o

### Pontos Fortes da Arquitetura

1. **âœ“ SeparaÃ§Ã£o Clara de Responsabilidades**
   - Controllers orquestram, nÃ£o processam
   - Services contÃªm lÃ³gica de negÃ³cio
   - Models apenas acessam dados
   - Requests validam e sanitizam

2. **âœ“ Versionamento Completo**
   - API v1 completamente isolada
   - Facilita evoluÃ§Ã£o sem quebrar compatibilidade
   - Estrutura preparada para v2, v3...

3. **âœ“ Multi-Database Architecture**
   - SeparaÃ§Ã£o lÃ³gica: users, customers, logs
   - Escalabilidade horizontal facilitada
   - Backup e recuperaÃ§Ã£o granular

4. **âœ“ SeguranÃ§a Robusta**
   - JWT com Firebase
   - Filtros de autenticaÃ§Ã£o e autorizaÃ§Ã£o
   - SanitizaÃ§Ã£o em mÃºltiplas camadas
   - Rate limiting
   - CORS configurado

5. **âœ“ Frontends Modernos**
   - Flutter: DDD + Clean Architecture
   - React: Component-based + Hooks
   - ComunicaÃ§Ã£o via API REST padronizada

### MÃ©tricas do Projeto

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ESTATÃSTICAS DO PROJETO            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Controllers:           7 mÃ³dulos                â”‚
â”‚ Services:              12 services              â”‚
â”‚ Models:                8 models                 â”‚
â”‚ Requests:              15 validaÃ§Ãµes            â”‚
â”‚ Rules:                 12 regras customizadas   â”‚
â”‚ Endpoints API:         ~45 rotas                â”‚
â”‚ Bancos de Dados:       3 databases              â”‚
â”‚ Frontends:             2 (Flutter + React)      â”‚
â”‚ Linguagens:            PHP, Dart, JavaScript    â”‚
â”‚ Frameworks:            CI4, Flutter, React      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Diagrama Final de IntegraÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   USUÃRIO FINAL                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Flutter Web    â”‚          â”‚   React Web     â”‚
    â”‚  Flutter Mobile â”‚          â”‚                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                             â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                â”‚  HTTPS/SSL  â”‚
                â”‚    CORS     â”‚
                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   CodeIgniter 4 API     â”‚
            â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
            â”‚   â”‚   AuthFilter    â”‚   â”‚
            â”‚   â”‚ LogRequestFilterâ”‚   â”‚
            â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
            â”‚            â”‚            â”‚
            â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
            â”‚   â”‚  Controllers    â”‚   â”‚
            â”‚   â”‚   Requests      â”‚   â”‚
            â”‚   â”‚   Services      â”‚   â”‚
            â”‚   â”‚   Models        â”‚   â”‚
            â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚               â”‚               â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚  MySQL  â”‚    â”‚  MySQL   â”‚     â”‚  MySQL  â”‚
    â”‚  Users  â”‚    â”‚Customers â”‚     â”‚  Logs   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Documento gerado em**: 15/12/2025  
**VersÃ£o da API**: v1  
**Mantido por**: Equipe de Desenvolvimento PRODERJ  
**ClassificaÃ§Ã£o**: DocumentaÃ§Ã£o TÃ©cnica Interna
 